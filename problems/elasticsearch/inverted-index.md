# 倒排索引

倒排索引是指通过文档内容找到文档ID，相对应的正排索引是指通过文档ID找到文档内容。

例如以下的文档，记录了一些人的名字和年龄：

| 文档ID | 名字  | 年龄 |
|--------|-------|------|
| 1      | Peter | 16   |
| 2      | Peter | 12   |
| 3      | Sara  | 12   |
| 4      | Jack  | 28   |

对上面的文档建立索引后会得到如下的倒排索引：

| 名字  | 文档ID |
|-------|--------|
| Peter | [1, 2] |
| Sara  | 3      |
| Jack  | 4      |

| 年龄 | 文档ID |
|------|--------|
| 16   | 1      |
| 12   | [2, 3] |
| 28   | 4      |

可以看到Elasticsearch会对文档中的每个字段建立一个倒排索引，当然在使用时我们可以指定字段是否需要被索引，没有索引的字段无法被搜索。

倒排索引包含以下两个部分：

1. 单词词典
记录了文档中的所有词汇（Term）以及词汇到倒排列表的关联关系。
2. 倒排列表
记录了词汇对应的倒排索引的集合，每一项倒排索引包含了文档ID、词频、词汇位置、词汇偏移量等信息。
