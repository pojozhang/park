# CAP理论

CAP理论是指：在一个分布式数据存储系统中，一致性、可用性、分区容错性这3个基本需求中最多只能同时满足2个。

- **C**onsistency

一致性是指数据在多个副本之间是否能够保持一致的特性。在一个分布式系统中，当一个数据项更新后，用户从任意一个节点上都能读取到它的最新值，那么这个系统具备强一致性，也就是各个节点上的数据时刻保持同步。

- **A**vailability

可用性是指服务必须一直处于可用的状态，也就是说对于用户的请求能够在有限的时间内返回正确的结果。如果服务的响应时间超过了设计时的要求或者服务返回了错误的结果，比如返回系统异常等，那么此时服务是不可用的。

- **P**artition tolerance

分区容错性是指当分布式系统遇到网络分区故障的时候仍然需要保证对外提供服务。网络分区是指系统中的一些节点因为故障无法和其它节点进行通信，导致整个网络分成了几块区域，假设有一个数据项存储在某个节点上，那么在网络分区发生后，和这个节点不连通的那部分节点就无法访问到这个数据了。
要提高分区容错性的通常采用的办法是复制，即把一个数据复制到多个节点中，一旦出现网络分区后，拥有该数据的节点可能就可能分散在不同的区域中，提高了分区容错性。
复制虽然提高了分区容错性，但是也带来了一致性的问题。要保证多个节点上的数据时刻一致，那么每次写操作都要等待所有节点写入完成。这样的等待又会带来可用性的问题，比如等待时间过长，导致访问超时。
